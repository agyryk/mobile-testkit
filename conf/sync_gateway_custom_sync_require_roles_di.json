{
    "interface":":4984",
    "adminInterface": "0.0.0.0:4985",
    "maxIncomingConnections": 0,
    "maxCouchbaseConnections": 16,
    "maxFileDescriptors": 90000,
    "slowServerCallWarningThreshold": 500,
    "compressResponses": true,
    "log": ["CRUD+", "Cache+", "HTTP+", "Changes+"],
    "verbose":"true",
    "cluster_config": {
        "server":"http://{{ couchbase_server_primary_node }}:8091",
        "data_dir":".",
        "bucket":"data-bucket"
    },
    "databases":{
        "db":{
            "feed_type":"DCPSHARD",
            "feed_params":{
                "num_shards":64
            },
            "server":"http://{{ couchbase_server_primary_node }}:8091",
            "bucket":"data-bucket",
            "users":{
                "GUEST":{
                    "disabled":true,
                    "admin_channels":[
                        "*"
                    ]
                }
            },
            "channel_index":{
                "server":"http://{{ couchbase_server_primary_node }}:8091",
                "bucket":"index-bucket",
                "writer":{{ is_index_writer }}
            },
            "sync":
            `function(doc, oldDoc){
                if (doc.channels.indexOf(doc.test_id + "-KMOW") > -1 || doc.channels.indexOf(doc.test_id + "-HWOD") > -1 || doc.channels.indexOf(doc.test_id + "-KDWB") > -1) {
                    requireRole(doc.test_id + "-radio_stations");
                } else if (doc.channels.indexOf(doc.test_id + "-ABC") > -1 || doc.channels.indexOf(doc.test_id + "-CBS") > -1 || doc.channels.indexOf(doc.test_id + "-NBC") > -1) {
                    requireRole(doc.test_id + "-tv_stations");
                } else {
                    throw({forbidden: "You have to have access to radio_stations or tv_stations!"})
                }
                channel(doc.channels);
            }`
        }
    }
}

